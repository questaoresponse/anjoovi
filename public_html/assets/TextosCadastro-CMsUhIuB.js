import{r as a,u as g,a as b,j as t}from"./index-BG8pJWrf.js";import{P as y}from"./Publicar-mZkAMyGt.js";/* empty css             */function T(){const e=a.useRef(!1),n=a.useRef(),c=g(),{server:d,navigate:u}=c,l=b(),s={texto:a.useRef(null)},[f,p]=a.useState(!1),m=async o=>{o.preventDefault();var r=new FormData,h=s.texto.current.value;r.append("type","option"),e.current&&r.append("id",n.current.id.toString()),r.append("texto",h),l.post(d+"/admin/textos_cadastro?type="+(e.current?"edit":"cadastro"),r,{arquivo:!0}).then(i=>{if(i.error)c.redirectError.current(i.error);else if(i.data.result=="true"){if(e.current){const x=new URLSearchParams(location.search);if(x.has("origin"))u(decodeURIComponent(x.get("origin")));else{const j=location.pathname.split("_");u(j[0]+"_lista")}e.current=!1,n.current=void 0}p(!0);var v=setTimeout(()=>{p(!1),clearInterval(v)},2e3);s.texto.current.value=""}})};return e.current=location.pathname=="/admin/textos_edit",a.useEffect(()=>{e.current&&l.post(d+"/admin/textos_edit"+location.search,{type:"info"}).then(o=>{if(o.data.result=="true"){const r=o.data.post_edit[0];s.texto.current.value=r.texto,n.current=r}})},[]),t.jsxs("div",{id:"pg",className:"nc",children:[t.jsxs("div",{id:"dt",className:"fechado",children:[t.jsx(y,{}),t.jsx("div",{id:"msg1",children:"Cadastrar texto"}),t.jsxs("form",{onSubmit:m,children:[t.jsx("label",{children:"Texto"}),t.jsx("textarea",{ref:s.texto}),t.jsx("button",{type:"submit",id:"button",children:"Enviar"})]})]}),t.jsx("div",{id:"m",style:{display:f?"flex":"none"},children:e.current?"Texto alterado com sucesso.":"Texto cadastrado com sucesso."})]})}export{T as default};
