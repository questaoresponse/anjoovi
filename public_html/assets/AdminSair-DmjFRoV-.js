import{u as f,a as v,r as d,j as p}from"./index-Hh3cf0fC.js";function S(){const e=f(),t=v(),{server:n,navigate:l}=e;return d.useEffect(()=>{var o=!1;function a(r){if(r.data.type=="sendDeletePeer"){const{tipo:s,modify:c,newPeer:g,deletePeer:m}=r.data.data;t.post(r.data.url,{type:"infos",tipo:s,modify:c,new:g,delete:m}),navigator.serviceWorker.removeEventListener("message",a),o(!0)}}function i(){return new Promise((r,s)=>{navigator.serviceWorker.controller?(navigator.serviceWorker.addEventListener("message",a),navigator.serviceWorker.controller.postMessage({type:"deleteAllPeer"}),o=r):r(!1)})}async function u(){await i(),await t.post(n+"/admin/sair",{type:"info"}),localStorage.getItem("token")&&(e.myStorage.current=!0,localStorage.removeItem("token"),e.myStorage.current=!0,localStorage.removeItem("us"),e.myStorage.current=!0,localStorage.removeItem("lsrc")),e.myStorage.current=!0,localStorage.removeItem("lg"),e.setLogin({usuario:null,isLoged:"false",logo:null}),e.cargo.current.setCargo((e.cargo.current.cargo||0)&-3),l("/")}u()},[]),p.jsx("div",{})}export{S as default};
