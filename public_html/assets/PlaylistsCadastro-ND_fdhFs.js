import{r as i,u as q,a as P,j as s}from"./index-B-z8f21Y.js";import{P as _}from"./Publicar-rKOsxVJG.js";/* empty css             */function I(){const u=i.useRef("post"),m=q(),h=P(),[v,n]=i.useState(!1),[j,y]=i.useState([]),[d,c]=i.useState([{post:{titulo:null,id:null},ref:i.createRef()}]),p=i.useRef(),t={titulo:i.useRef(null),input:i.useRef(null),error:i.useRef(null),uploaded:i.useRef(null),add:i.useRef(null)},r=e=>{e?t.add.current.classList.replace("f","a"):t.add.current.classList.replace("a","f")},N=()=>{t.error.current.classList.replace("f","a");var e=setTimeout(()=>{t.error.current.classList.replace("a","f"),clearTimeout(e)},2e3)},R=()=>{t.uploaded.current.classList.replace("f","a");var e=setTimeout(()=>{t.uploaded.current.classList.replace("a","f"),clearTimeout(e)},2e3)},b=e=>{if(e.preventDefault(),d.filter(a=>!a.post.id).length>0)N();else{const a=d.map(o=>o.post.id),l=t.titulo.current.value;h.post(m.server+"/admin/playlists_cadastro",{type:"cadastro",data_type:u.current,titulo:l,posts:JSON.stringify(a)}).then(o=>{o.data.result=="true"&&(R(),c([{post:{titulo:null,id:null},ref:i.createRef()}]),n(!1),r(!1),t.titulo.current.value="")})}},g=e=>{n(!0),f(),p.current=e},f=()=>{h.post(m.server+"/admin/playlists_cadastro?search="+t.input.current.value,{type:"info",data_type:u.current}).then(e=>{e.data.result=="true"&&y(e.data.posts)})},x=()=>{n(!1),p.current=void 0},L=e=>{u.current=e.target.value,c([{post:{titulo:null,id:null},ref:i.createRef()}]),n(!1),r(!1)},C=(e,a)=>{c(l=>(l[p.current].post={titulo:e,id:a},l.filter(o=>!o.post.id).length>0?t.add.current.classList.contains("a")&&r(!1):t.add.current.classList.contains("a")||r(!0),x(),l))},S=()=>{c(e=>e.concat({post:{titulo:null,id:null},ref:i.createRef()})),r(!1)};return s.jsx("div",{id:"pg",className:"pc",children:s.jsxs("div",{id:"dt",children:[s.jsx(_,{}),s.jsx("div",{id:"msg1",children:"Cadastrar playlist"}),s.jsxs("form",{onSubmit:b,children:[s.jsx("label",{children:"Título"}),s.jsx("input",{className:"input",id:"titulo",ref:t.titulo,required:!0}),s.jsx("label",{children:"Tipo"}),s.jsxs("select",{id:"tipo",onChange:L,children:[s.jsx("option",{value:"post",children:"texto"}),s.jsx("option",{value:"post_imagem",children:"imagem"}),s.jsx("option",{value:"post_musica",children:"musica"})]}),s.jsx("div",{id:"list",children:d.map((e,a)=>s.jsxs("div",{className:"item-list",children:[s.jsx("div",{ref:e.ref,className:"title-list txt-1",children:e.post.titulo}),s.jsx("div",{className:"add-list",onClick:()=>{g(a)},children:"+"})]},a))}),s.jsx("div",{ref:t.add,className:"f",onClick:S,children:"adicionar"}),s.jsx("button",{type:"submit",id:"button",children:"Enviar"})]}),s.jsxs("div",{style:{display:v?"block":"none"},id:"pesquisa",children:[s.jsxs("form",{onSubmit:f,id:"div-pesqusia",children:[s.jsx("div",{children:"titulo:"}),s.jsx("input",{ref:t.input,onInput:f})]}),s.jsx("div",{onClick:x,className:"x",children:"X"}),s.jsx("div",{id:"conteudo",children:j.map((e,a)=>s.jsx("div",{onClick:()=>{C(e.titulo,e.id)},className:"result",children:s.jsx("p",{className:"txt",children:e.titulo})},a))})]}),s.jsx("div",{ref:t.uploaded,id:"m",className:"f aviso",children:"Playlist cadastrada com sucesso!"}),s.jsx("div",{ref:t.error,className:"f aviso",id:"error",children:"Preencha todos os espaços disponiveis"})]})})}export{I as default};
