import{u as d,a as m,r as v,j as p}from"./index-Bj1GvC0R.js";function y(){const t=d(),r=m(),{server:n,navigate:i}=t;return v.useEffect(()=>{var a=!1;function o(e){if(e.data.type=="sendDeletePeer"){const{tipo:s,modify:g,newPeer:c,deletePeer:f}=e.data.data;r.post(e.data.url,{type:"infos",tipo:s,modify:g,new:c,delete:f}),navigator.serviceWorker.removeEventListener("message",o),a(!0)}}function l(){return new Promise((e,s)=>{navigator.serviceWorker.controller?(navigator.serviceWorker.addEventListener("message",o),navigator.serviceWorker.controller.postMessage({type:"deleteAllPeer"}),a=e):e(!1)})}async function u(){await l(),await r.post(n+"/admin/sair",{type:"info"}),localStorage.getItem("lg")&&localStorage.removeItem("lg"),t.myStorage.current=!0,t.setLogin({usuario:null,isLoged:"false",logo:null}),t.cargo.current.setCargo(128),t.navigateClass.current.atualizePage?window.location.href="/":i("/")}u()},[]),p.jsx("div",{})}export{y as default};
