import{r,u as g,a as b,j as t}from"./index-DEHY2V7V.js";import{P as y}from"./Publicar-DRbtlcrn.js";/* empty css             */function T(){const e=r.useRef(!1),n=r.useRef(),c=g(),{server:d,navigate:u}=c,l=b(),s={texto:r.useRef(null)},[f,p]=r.useState(!1),m=async o=>{o.preventDefault();var a=new FormData,h=s.texto.current.value;a.append("type","option"),e.current&&a.append("id",n.current.id.toString()),a.append("texto",h),l.post(d+"/admin/textos_cadastro?type="+(e.current?"edit":"cadastro"),a,{arquivo:!0}).then(i=>{if(i.error)c.setRedirectError(i.error);else if(i.data.result=="true"){if(e.current){const x=new URLSearchParams(location.search);if(x.has("origin"))u(decodeURIComponent(x.get("origin")));else{const j=location.pathname.split("_");u(j[0]+"_lista")}e.current=!1,n.current=void 0}p(!0);var v=setTimeout(()=>{p(!1),clearInterval(v)},2e3);s.texto.current.value=""}})};return e.current=location.pathname=="/admin/textos_edit",r.useEffect(()=>{e.current&&l.post(d+"/admin/textos_edit"+location.search,{type:"info"}).then(o=>{if(o.data.result=="true"){const a=o.data.post_edit[0];s.texto.current.value=a.texto,n.current=a}})},[]),t.jsxs("div",{id:"pg",className:"nc",children:[t.jsxs("div",{id:"dt",className:"fechado",children:[t.jsx(y,{}),t.jsx("div",{id:"msg1",children:"Cadastrar texto"}),t.jsxs("form",{onSubmit:m,children:[t.jsx("label",{children:"Texto"}),t.jsx("textarea",{ref:s.texto}),t.jsx("button",{type:"submit",id:"button",children:"Enviar"})]})]}),t.jsx("div",{id:"m",style:{display:f?"flex":"none"},children:e.current?"Texto alterado com sucesso.":"Texto cadastrado com sucesso."})]})}export{T as default};
