import{u as R,a as g,r as n,j as e}from"./index-Dc0eej-o.js";const E=({openMenu:a,nome:o})=>e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"name",children:"Nome atual:"}),e.jsx("div",{className:"value txt-1",children:o}),e.jsx("div",{className:"openMenu",onClick:a,children:"Alterar nome"})]}),F=({openMenu:a,usuario:o})=>e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"name",children:"Nome de usuário atual:"}),e.jsx("div",{className:"value txt-1",children:o}),e.jsx("div",{className:"openMenu",onClick:a,children:"Alterar nome de usuário"})]}),z=({openMenu:a,senha:o})=>{const[x,t]=n.useState("");return n.useEffect(()=>{for(var l="",c=0;c<o;c++)l+=".";t(l)},[o]),e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"name",children:"Senha atual:"}),e.jsx("input",{id:"password",className:"value txt-1",value:x,type:"password",readOnly:!0}),e.jsx("div",{className:"openMenu",onClick:a,children:"Alterar senha"})]})},D=({openMenu:a})=>e.jsx(e.Fragment,{children:e.jsx("div",{className:"openMenu",onClick:a,children:"Excluir conta"})});function $(){const a=R(),o=a.server,x=g(),[t,l]=n.useState(!1),[c,y]=n.useState(!1),u={nome:n.useRef(null),usuario:n.useRef(null),senha:n.useRef(null),conta:n.useRef(null)},i={nome:n.useRef(null),usuario:n.useRef(null),senha:n.useRef(null),conta:n.useRef(null)},b={nome:/.+/,usuario:/^[a-z0-9._]+$/,senha:/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[!@#$%^&*])[a-zA-Z\d!@#$%^&*]{8,}$/,conta:/.+/},[f,N]=n.useState({nome:"",usuario:"",senha:0}),[d,h]=n.useState(!1);n.useEffect(()=>{a.setSelected("account");function s(){x.post(o+"/admin/account",{type:"info"}).then(r=>{r.data.error?a.setRedirectError(r.data.error):N({nome:r.data.nome,usuario:r.data.usuario,senha:r.data.senha})})}s()},[]);const p={nome:e.jsx(E,{openMenu:()=>{h("nome")},nome:f.nome}),usuario:e.jsx(F,{openMenu:()=>{h("usuario")},usuario:f.usuario}),senha:e.jsx(z,{openMenu:()=>{h("senha")},senha:f.senha}),conta:e.jsx(D,{openMenu:()=>{h("conta")}})},j=()=>{h(!1)},v=s=>{const r=u[s].current.value;if(b[s].test(r)){const M=s=="conta"?"excluir_"+s:"trocar_"+s;u[s].current.value="";const w=i[s].current.value;i[s].current.value="",y(!0),x.post(o+"/admin/account",{type:"option",[s]:r,tipo:M,senha_inserida:w}).then(m=>{y(!1),m.data.error?a.redirect(m.error):m.data.result=="true"?(l(!1),N(C=>({...C,[s]:m.data[s]}))):m.data.result=="false"&&l(s)})}},S=s=>{s.preventDefault(),v("nome")},_=s=>{s.preventDefault(),v("usuario")},k=s=>{s.preventDefault(),v("senha")},A=s=>{s.preventDefault(),v("conta")};return e.jsxs("div",{id:"acc",children:[p.nome,p.usuario,p.senha,p.conta,e.jsx("div",{id:"menu-a",style:{display:d?"block":"none"}}),e.jsx("form",{onSubmit:S,children:e.jsxs("div",{id:"menu_nome",className:"menu",style:{display:d=="nome"?"block":"none"},children:[e.jsx("div",{className:"error",style:{display:t=="nome"?"block":"none"},children:"Senha incorreta."}),e.jsx("div",{id:"a_nome",children:"Novo nome:"}),e.jsx("input",{ref:u.nome,id:"i_nome",placeholder:"Novo nome"}),e.jsx("input",{ref:i.nome,type:"password",id:"at_nome_senha",placeholder:"Senha atual"}),e.jsx("button",{type:"submit",children:"Alterar"}),e.jsx("div",{className:"x",onClick:j,children:"X"})]})}),e.jsx("form",{onSubmit:_,children:e.jsxs("div",{id:"menu_usuario",className:"menu",style:{display:d=="usuario"?"block":"none"},children:[e.jsx("div",{className:"error",style:{display:t=="usuario"?"block":"none"},children:"Nome de usuário já existe ou senha incorreta."}),e.jsx("div",{id:"a_usuario",children:"Novo usuário:"}),e.jsx("input",{ref:u.usuario,id:"i_usuario",placeholder:"Novo nome de usuário"}),e.jsx("input",{ref:i.usuario,type:"password",id:"at_usuario_senha",placeholder:"Senha atual"}),e.jsx("button",{type:"submit",children:"Alterar"}),e.jsx("div",{className:"x",onClick:j,children:"X"})]})}),e.jsx("form",{onSubmit:k,children:e.jsxs("div",{id:"menu_senha",className:"menu",style:{display:d=="senha"?"block":"none"},children:[e.jsx("div",{className:"error",style:{display:t=="senha"?"block":"none"},children:"Senha incorreta."}),e.jsx("div",{id:"a_senha",children:"Nova senha:"}),e.jsx("input",{ref:u.senha,type:"password",id:"i_senha",placeholder:"Nova senha"}),e.jsx("input",{ref:i.senha,type:"password",id:"at_senha_senha",placeholder:"Senha atual"}),e.jsx("button",{type:"submit",children:"Alterar"}),e.jsx("div",{className:"x",onClick:j,children:"X"})]})}),e.jsx("form",{onSubmit:A,children:e.jsxs("div",{id:"menu_conta",className:"menu",style:{display:d=="conta"?"block":"none"},children:[e.jsx("div",{id:"a_conta",children:"Excluir conta:"}),e.jsx("div",{className:"error",style:{display:t=="conta"?"block":"none"},children:"Senha incorreta."}),e.jsx("input",{ref:i.conta,type:"password",id:"at_conta_senha",placeholder:"Senha atual"}),e.jsx("button",{type:"submit",children:"Alterar"}),e.jsx("div",{className:"x",onClick:j,children:"X"})]})}),e.jsx("div",{id:"loading-div",style:{display:c?"block":"none"},children:e.jsx("i",{className:(c?"ball":"no-animation")+" bi-arrow-clockwise",style:{fontSize:"70px"}})})]})}export{$ as default};
