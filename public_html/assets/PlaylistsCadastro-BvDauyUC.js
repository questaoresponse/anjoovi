import{r as i,u as P,a as T,j as e}from"./index-BG8pJWrf.js";import{P as w}from"./Publicar-mZkAMyGt.js";/* empty css             */function A(){const d=i.useRef("post"),m=P(),h=T(),[x,c]=i.useState(!1),[j,y]=i.useState([]),[u,o]=i.useState([{post:{titulo:null,id:null},ref:i.createRef()}]),p=i.useRef(),[b,n]=i.useState(!1),l={titulo:i.useRef(null),input:i.useRef(null),error:i.useRef(null),uploaded:i.useRef(null)},N=()=>{l.error.current.classList.replace("f","a");var s=setTimeout(()=>{l.error.current.classList.replace("a","f"),clearTimeout(s)},2e3)},g=()=>{l.uploaded.current.classList.replace("f","a");var s=setTimeout(()=>{l.uploaded.current.classList.replace("a","f"),clearTimeout(s)},2e3)},R=s=>{if(s.preventDefault(),u.filter(t=>!t.post.id).length>0)N();else{const t=u.map(r=>r.post.id),a=l.titulo.current.value;h.post(m.server+"/admin/playlists_cadastro",{type:"cadastro",data_type:d.current,titulo:a,posts:JSON.stringify(t)}).then(r=>{r.data.result=="true"&&(g(),o([{post:{titulo:null,id:null},ref:i.createRef()}]),c(!1),n(!1),l.titulo.current.value="")})}},S=s=>{c(!0),f(),p.current=s},f=()=>{h.post(m.server+"/admin/playlists_cadastro?search="+l.input.current.value,{type:"info",data_type:d.current}).then(s=>{s.data.result=="true"&&y(s.data.posts)})},v=()=>{c(!1),p.current=void 0},C=s=>{d.current=s.target.value,o([{post:{titulo:null,id:null},ref:i.createRef()}]),c(!1),n(!1)},_=(s,t)=>{o(a=>(a[p.current].post={titulo:s,id:t},n(a.filter(r=>!r.post.id).length==0),v(),a))},k=()=>{o(s=>s.concat({post:{titulo:null,id:null},ref:i.createRef()})),n(!1)},q=s=>{s!=0&&(o(t=>t.filter((a,r)=>r!=s)),n(u.filter(t=>!t.post.id).length==0))};return e.jsx("div",{id:"pg",className:"pc",children:e.jsxs("div",{id:"dt",children:[e.jsx(w,{}),e.jsx("div",{id:"msg1",children:"Cadastrar playlist"}),e.jsxs("form",{onSubmit:R,children:[e.jsx("label",{children:"Título"}),e.jsx("input",{className:"input",id:"titulo",ref:l.titulo,required:!0}),e.jsx("label",{children:"Tipo"}),e.jsxs("select",{id:"tipo",onChange:C,children:[e.jsx("option",{value:"post",children:"Matéria"}),e.jsx("option",{value:"post_imagem",children:"Imagem"}),e.jsx("option",{value:"post_musica",children:"Música"})]}),e.jsx("div",{id:"list",children:u.map((s,t)=>e.jsxs("div",{className:"item-list",children:[e.jsx("div",{ref:s.ref,className:"title-list txt-1",children:s.post.titulo}),e.jsx("div",{className:"add-item",onClick:()=>{S(t)},children:"+"}),e.jsx("div",{className:"remove-item"+(t==0?" disabled":""),onClick:()=>{q(t)},children:"-"})]},t))}),e.jsx("div",{className:"add-btn",style:{display:b?"block":"none"},onClick:k,children:"adicionar"}),e.jsx("button",{type:"submit",id:"button",children:"Enviar"})]}),e.jsxs("div",{style:{display:x?"block":"none"},id:"pesquisa",children:[e.jsxs("form",{onSubmit:f,id:"div-pesqusia",children:[e.jsx("div",{children:"titulo:"}),e.jsx("input",{ref:l.input,onInput:f})]}),e.jsx("div",{onClick:v,className:"x",children:"X"}),e.jsx("div",{id:"conteudo",children:j.map((s,t)=>e.jsx("div",{onClick:()=>{_(s.titulo,s.id)},className:"result",children:e.jsx("p",{className:"txt",children:s.titulo})},t))})]}),e.jsx("div",{ref:l.uploaded,id:"m",className:"f aviso",children:"Playlist cadastrada com sucesso!"}),e.jsx("div",{ref:l.error,className:"f aviso",id:"error",children:"Preencha todos os espaços disponiveis"})]})})}export{A as default};
